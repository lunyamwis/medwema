{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <h3>Billing Dashboard</h3>
  <a href="{% url 'transactions_view' %}" class="btn btn-outline-secondary mb-3">Confirm Transactions</a>
  <a href="{% url 'revenue_report' %}" class="btn btn-outline-secondary mb-3">View Revenue Report</a>
  <h5>Unpaid Bills</h5>
  <table class="table">
    <tr><th>Patient</th><th>Amount</th><th>Actions</th></tr>
    {% for bill in bills %}
    <tr>
      <td>{{ bill.patient.name }}</td>
    <td>{{ bill.total_amount }}</td>
    <td>
      {% if not bill.is_paid %}
      <a href="{% url 'initiate_payment' bill.id %}" class="btn btn-sm btn-primary">Pay</a>
      <a href="{% url 'mark_bill_paid' bill.id %}" class="btn btn-sm btn-success">
          Mark as Paid
      </a>
      {% else %}
      <a href="{% url 'print_receipt' bill.id %}" target="_blank" class="btn btn-sm btn-outline-secondary">
          Print Receipt
      </a>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
</div>
{% endblock %}